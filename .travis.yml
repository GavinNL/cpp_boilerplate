language: cpp
matrix:
  include:
#    - os: linux
#      script: make travis
#    - os: linux
#      addons:
#        apt:
#          sources:
#            - ubuntu-toolchain-r-test
#          packages:
#            - g++-4.9
#            - gcc-4.9
#      env:
#         - COMPILER="CC=gcc-4.9 && CXX=g++-4.9"
#      before_install: eval "${COMPILER}"
#      script: make travis
#    - os: linux
#      addons:
#        apt:
#          sources:
#            - ubuntu-toolchain-r-test
#          packages:
#            - g++-5
#            - gcc-5
#      env:
#         - COMPILER="CC=gcc-5 && CXX=g++-5"
#      before_install: eval "${COMPILER}"
#      script: make travis
#
#    - os: linux
#      addons:
#        apt:
#          sources:
#            - ubuntu-toolchain-r-test
#          packages:
#            - g++-7
#            - gcc-7
#      env:
#         - COMPILER="CC=gcc-7 && CXX=g++-7"
#      before_install: eval "${COMPILER}"
#      script: make travis
#
#    - os: linux
#      compiler: clang
#      script: make travis
#    - os: osx
#      script: make travis
#    - os: osx
#      osx_image: xcode10
#      script: make travis
#    - os: windows
#      install: choco install mingw
#      script: mingw32-make travis
#    - os: windows
#      install: choco install mingw --version 4.9.3 --force
#      script: mingw32-make travis

    - os: linux
      compiler: gcc
      env:
      - COMPILER=g++-7
      - RUN_CODECOV=TRUE
      - COMPILER_CC=gcc-7
      - COMPILER_CXX=g++-7
      addons:
        apt:
          sources: ['ubuntu-toolchain-r-test']
          packages: ['gcc-7', 'g++-7' ]
#      before_install: eval "${COMPILER}"
      install:
        - pip install --user --upgrade pip
        - pip install --user conan --upgrade
        - conan user
        - conan remote add bincrafters https://api.bintray.com/conan/bincrafters/public-conan
      script:
        - conan user
        - mkdir build && cd build
        - conan install --build missing ..
        - cmake .. -DCPPBOILERPLATE_ENABLE_COVERAGE:BOOL=TRUE -DCPPBOILERPLATE_BUILD_TESTS:BOOL=TRUE
        - cmake --build .
        - ctest

    - os: windows
      install: choco install conan
      script:
        - arch
        - export PATH=$PATH:/c/Program\ Files/Conan/conan
        - conan user
        - conan remote add bincrafters https://api.bintray.com/conan/bincrafters/public-conan
        - mkdir build && cd build
        - conan install --build missing -s compiler="Visual Studio" -s compiler.version=15 -s arch=x86_64 ..
        - cmake .. -G "Visual Studio 15 2017 Win64" -DCMAKE_BUILD_TYPE:STRING=Release
        - cmake --build . --config "Release"



